!function(o,c){if(c.addEventListener){var t,e=Array.prototype,n=Object.prototype,r=e.forEach,f=e.slice,h=n.hasOwnProperty,s=n.toString,a=o.Popcorn,u=[],l=!1,p={events:{hash:{},apis:{}}},v=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(t,e){o.setTimeout(t,16)},i={put:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},g=function(t,e){return new g.p.init(t,e||null)};g.version="@VERSION",g.isSupported=!0,g.instances=[],g.p=g.prototype={init:function(e,t){var n,a,i,d=this;if("function"==typeof e)return"complete"===c.readyState?void e(c,g):(u.push(e),void(l||(l=!0,i=function(){c.removeEventListener("DOMContentLoaded",i,!1);for(var t=0,e=u.length;t<e;t++)u[t].call(c,g);u=null},c.addEventListener("DOMContentLoaded",i,!1))));if("string"==typeof e)try{n=c.querySelector(e)}catch(t){throw new Error("Popcorn.js Error: Invalid media element selector: "+e)}if(this.media=n||e,a=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[a]=this.media,this.options=g.extend({},t)||{},this.id=this.options.id||g.guid(a),g.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new _(this)},g.instances.push(this);var o=function(){var t,a,i,r,s;d.media.currentTime<0&&(d.media.currentTime=0),d.media.removeEventListener("loadedmetadata",o,!1),t=(t=d.media.duration)!=t?Number.MAX_VALUE:t+1,g.addTrackEvent(d,{start:t,end:t}),d.isDestroyed||(d.data.durationChange=function(){var t=d.media.duration,e=t+1,n=d.data.trackEvents.byStart,a=d.data.trackEvents.byEnd;n.pop(),a.pop();for(var i=a.length-1;0<i;i--)a[i].end>t&&d.removeTrackEvent(a[i]._id);for(var r=0;r<n.length;r++)n[r].end>t&&d.removeTrackEvent(n[r]._id);d.data.trackEvents.byEnd.push({start:e,end:e}),d.data.trackEvents.byStart.push({start:e,end:e})},d.media.addEventListener("durationchange",d.data.durationChange,!1)),d.options.frameAnimation?(d.data.timeUpdate=function(){g.timeUpdate(d,{}),g.forEach(g.manifest,function(t,e){if(a=d.data.running[e]){r=a.length;for(var n=0;n<r;n++)i=a[n],(s=i._natives)&&s.frame&&s.frame.call(d,{},i,d.currentTime())}}),d.emit("timeupdate"),d.isDestroyed||v(d.data.timeUpdate)},d.isDestroyed||v(d.data.timeUpdate)):(d.data.timeUpdate=function(t){g.timeUpdate(d,t)},d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,!1))};return d.media.addEventListener("error",function(){d.error=d.media.error},!1),1<=d.media.readyState?o():d.media.addEventListener("loadedmetadata",o,!1),this}},g.p.init.prototype=g.p,g.byId=function(t){for(var e=g.instances,n=e.length,a=0;a<n;a++)if(e[a].id===t)return e[a];return null},g.forEach=function(t,e,n){if(!t||!e)return{};var a,i;if(n=n||this,r&&t.forEach===r)return t.forEach(e,n);if("[object NodeList]"===s.call(t)){for(a=0,i=t.length;a<i;a++)e.call(n,t[a],a,t);return t}for(a in t)h.call(t,a)&&e.call(n,t[a],a,t);return t},g.extend=function(t){var n=t,e=f.call(arguments,1);return g.forEach(e,function(t){for(var e in t)n[e]=t[e]}),n},g.extend(g,{noConflict:function(t){return t&&(o.Popcorn=a),g},error:function(t){throw new Error(t)},guid:function(t){return g.guid.counter++,(t||"")+(+new Date+g.guid.counter)},sizeOf:function(t){var e,n=0;for(e in t)n++;return n},isArray:Array.isArray||function(t){return"[object Array]"===s.call(t)},nop:function(){},position:function(t){if(!t.parentNode)return null;var e,n=t.getBoundingClientRect(),a={},i=(t.ownerDocument,c.documentElement),r=c.body,s=i.clientTop||r.clientTop||0,d=i.clientLeft||r.clientLeft||0,t=o.pageYOffset&&i.scrollTop||r.scrollTop,r=o.pageXOffset&&i.scrollLeft||r.scrollLeft,s=Math.ceil(n.top+t-s),d=Math.ceil(n.left+r-d);for(e in n)a[e]=Math.round(n[e]);return g.extend({},a,{top:s,left:d})},disable:function(t,e){if(!t.data.disabled[e]){if(t.data.disabled[e]=!0,e in g.registryByName&&t.data.running[e])for(var n,a=t.data.running[e].length-1;0<=a;a--)(n=t.data.running[e][a])._natives.end.call(t,null,n),t.emit("trackend",g.extend({},n,{plugin:n.type,type:"trackend"}));return t}},enable:function(t,e){if(t.data.disabled[e]){if(t.data.disabled[e]=!1,e in g.registryByName&&t.data.running[e])for(var n,a=t.data.running[e].length-1;0<=a;a--)(n=t.data.running[e][a])._natives.start.call(t,null,n),t.emit("trackstart",g.extend({},n,{plugin:n.type,type:"trackstart",track:n}));return t}},destroy:function(t){var e,n,a,i,r=t.data.events,s=t.data.trackEvents;for(n in r){for(a in e=r[n])delete e[a];r[n]=null}for(i in g.registryByName)g.removePlugin(t,i);s.byStart.length=0,s.byEnd.length=0,t.isDestroyed||(t.data.timeUpdate&&t.media.removeEventListener("timeupdate",t.data.timeUpdate,!1),t.isDestroyed=!0),g.instances.splice(g.instances.indexOf(t),1)}}),g.guid.counter=1,g.extend(g.p,(t={},g.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(n){t[n]=function(t){var e;return"function"==typeof this.media[n]?(null!=t&&/play|pause/.test(n)&&(this.media.currentTime=g.util.toSeconds(t)),this.media[n](),this):null!=t?((e=this.media[n])!==(this.media[n]=t)&&this.emit("attrchange",{attribute:n,previousValue:e,currentValue:t}),this):this.media[n]}}),t)),g.forEach("enable disable".split(" "),function(e){g.p[e]=function(t){return g[e](this,t)}}),g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(t,e,n){var a,i,r=arguments.length,s="trackadded";try{i=g.util.toSeconds(t)}catch(t){}if("number"==typeof i&&(t=i),"number"==typeof t&&2===r)n=e,e=t,t=g.guid("cue");else if(1===r)e=-1;else if(a=this.getTrackEvent(t))this.data.trackEvents.remove(t),k.end(this,a),g.removeTrackEvent.ref(this,t),s="cuechange","string"==typeof t&&2===r&&("number"==typeof e&&(n=a._natives.start),"function"==typeof e&&(n=e,e=a.start));else if(2<=r){if("string"==typeof e){try{i=g.util.toSeconds(e)}catch(t){}e=i}"number"==typeof e&&(n=n||g.nop()),"function"==typeof e&&(n=e,e=-1)}return r={id:t,start:e,end:e+1,_running:!1,_natives:{start:n||g.nop,end:g.nop,type:"cue"}},a&&(r=g.extend(a,r)),"cuechange"===s?(r._id=r.id||r._id||g.guid(r._natives.type),this.data.trackEvents.add(r),k.start(this,r),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,r),this.emit(s,g.extend({},r,{id:t,type:s,previousValue:{time:a.start,fn:a._natives.start},currentValue:{time:e,fn:n||g.nop},track:a}))):g.addTrackEvent(this,r),this},mute:function(t){t=null==t||!0===t?"muted":"unmuted";return"unmuted"==t&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"==t&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(t){return this.mute(null!=t&&!t)},position:function(){return g.position(this.media)},toggle:function(t){return g[this.data.disabled[t]?"enable":"disable"](this,t)},defaults:function(t,e){return g.isArray(t)?g.forEach(t,function(t){for(var e in t)this.defaults(e,t[e])},this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[t]||(this.options.defaults[t]={}),g.extend(this.options.defaults[t],e)),this}}),g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events,p.events.apiTypes=["UIEvents","MouseEvents","Events"],function(r,s){for(var t=p.events.apiTypes,e=r.Natives.split(/\s+/g),n=0,a=e.length;n<a;n++)s.hash[e[n]]=!0;t.forEach(function(t,e){s.apis[t]={};for(var n=r[t].split(/\s+/g),a=n.length,i=0;i<a;i++)s.apis[t][n[i]]=!0})}(g.Events,p.events),g.events={isNative:function(t){return!!p.events.hash[t]},getInterface:function(t){if(!g.events.isNative(t))return!1;for(var e,n,a=p.events,i=a.apiTypes,r=a.apis,s=0,d=i.length;s<d;s++)if(r[n=i[s]][t]){e=n;break}return e},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(t,e){var n,a,i=this.data.events[t];if(i){if(n=g.events.getInterface(t))return(n=c.createEvent(n)).initEvent(t,!0,!0,o,1),this.media.dispatchEvent(n),this;for(a=i.slice();a.length;)a.shift().call(this,e)}return this},listen:function(e,t){var n,a,i=this,r=!0,s=g.events.hooks[e];if("function"!=typeof t)throw new Error("Popcorn.js Error: Listener is not a function");return this.data.events[e]||(r=!(this.data.events[e]=[])),s&&(s.add&&s.add.call(this,{},t),s.bind&&(e=s.bind),s.handler&&(a=t,t=function(t){s.handler.call(i,t,a)}),r=!0,this.data.events[e]||(r=!(this.data.events[e]=[]))),this.data.events[e].push(t),!r&&-1<g.events.all.indexOf(e)&&this.media.addEventListener(e,function(t){if(i.data.events[e])for(n=i.data.events[e].slice();n.length;)n.shift().call(i,t)},!1),this},unlisten:function(t,e){var n,a=this.data.events[t];if(a){if("string"==typeof e){for(var i=0;i<a.length;i++)a[i].name===e&&a.splice(i--,1);return this}if("function"!=typeof e)return this.data.events[t]=null,this;for(;-1!==n;)-1!==(n=a.indexOf(e))&&a.splice(n,1);return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(t,e){var n=!1;this.media.readyState&&(setTimeout(function(){e.call(this,t)}.bind(this),0),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(t,e){this.data.hooks.canplayall.fired||(e.call(this,t),this.data.hooks.canplayall.fired=!0)}}}},g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(t){g.p[t[0]]=g.p[t[1]]=g.events.fn[t[0]]}),k.start=function(t,e){e.end>t.media.currentTime&&e.start<=t.media.currentTime&&!e._running&&(e._running=!0,t.data.running[e._natives.type].push(e),t.data.disabled[e._natives.type]||(e._natives.start.call(t,null,e),t.emit("trackstart",g.extend({},e,{plugin:e._natives.type,type:"trackstart",track:e}))))},k.end=function(t,e){var n;(e.end<=t.media.currentTime||e.start>t.media.currentTime)&&e._running&&(n=t.data.running[e._natives.type],e._running=!1,n.splice(n.indexOf(e),1),t.data.disabled[e._natives.type]||(e._natives.end.call(t,null,e),t.emit("trackend",g.extend({},e,{plugin:e._natives.type,type:"trackend",track:e}))))},_.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(t){var e,n;if(!a)return!0;for(e in a)if(x(t,e,n=a[e])||x(t._natives,e,n))return!0;return!1})},_.prototype.add=function(t){var e,n,a=this.byStart,i=this.byEnd;for(t&&t._id&&this.parent.data.history.push(t._id),t.start=g.util.toSeconds(t.start,this.parent.options.framerate),t.end=g.util.toSeconds(t.end,this.parent.options.framerate),e=a.length-1;0<=e;e--)if(t.start>=a[e].start){a.splice(e+1,0,t);break}for(n=i.length-1;0<=n;n--)if(t.end>i[n].end){i.splice(n+1,0,t);break}e<=this.parent.data.trackEvents.startIndex&&t.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++,n<=this.parent.data.trackEvents.endIndex&&t.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++,this.count++},_.prototype.remove=function(t,e){if(t instanceof k&&(t=t.id),"object"==typeof t)return this.where(t).forEach(function(t){this.removeTrackEvent(t._id)},this.parent),this;var n,a,i,r,s=this.byStart.length,d=0,o=0,u=[],c=[],l=[],p=[];for(0;-1<--s;)n=this.byStart[d],a=this.byEnd[d],n._id||(u.push(n),c.push(a)),n._id&&(n._id!==t&&u.push(n),a._id!==t&&c.push(a),n._id===t&&(o=d,0)),d++;if(d=0,s=this.animating.length)for(;-1<--s;)(i=this.animating[d])._id||l.push(i),i._id&&i._id!==t&&l.push(i),d++;o<=this.startIndex&&this.startIndex--,o<=this.endIndex&&this.endIndex--,this.byStart=u,this.byEnd=c,this.animating=l,this.count--,r=this.parent.data.history.length;for(var f=0;f<r;f++)this.parent.data.history[f]!==t&&p.push(this.parent.data.history[f]);this.parent.data.history=p},g.addTrackEvent=function(t,e){var n;e instanceof k||((e=new k(e))&&e._natives&&e._natives.type&&t.options.defaults&&t.options.defaults[e._natives.type]&&(n=g.extend({},e),g.extend(e,t.options.defaults[e._natives.type],n)),e._natives&&(e._id=e.id||e._id||g.guid(e._natives.type),e._natives._setup&&(e._natives._setup.call(t,e),t.emit("tracksetup",g.extend({},e,{plugin:e._natives.type,type:"tracksetup",track:e})))),t.data.trackEvents.add(e),k.start(t,e),this.timeUpdate(t,null,!0),e._id&&g.addTrackEvent.ref(t,e),t.emit("trackadded",g.extend({},e,e._natives?{plugin:e._natives.type}:{},{type:"trackadded",track:e})))},g.addTrackEvent.ref=function(t,e){return t.data.trackRefs[e._id]=e,t},g.removeTrackEvent=function(t,e){var n=t.getTrackEvent(e);n&&(n._natives._teardown&&n._natives._teardown.call(t,n),t.data.trackEvents.remove(e),g.removeTrackEvent.ref(t,e),n._natives&&t.emit("trackremoved",g.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n})))},g.removeTrackEvent.ref=function(t,e){return delete t.data.trackRefs[e],t},g.getTrackEvents=function(t){for(var e,n=[],a=t.data.trackEvents.byStart,i=a.length,r=0;r<i;r++)(e=a[r])._id&&n.push(e);return n},g.getTrackEvents.ref=function(t){return t.data.trackRefs},g.getTrackEvent=function(t,e){return t.data.trackRefs[e]},g.getTrackEvent.ref=function(t,e){return t.data.trackRefs[e]},g.getLastTrackEventId=function(t){return t.data.history[t.data.history.length-1]},g.timeUpdate=function(t,e){var n,a,i,r,s,d=t.media.currentTime,o=t.data.trackEvents.previousUpdateTime,u=t.data.trackEvents,c=u.endIndex,l=u.startIndex,p=u.byStart.length,f=u.byEnd.length,h=g.registryByName,v="trackstart",m="trackend";if(o<=d){for(;u.byEnd[c]&&u.byEnd[c].end<=d;){if(r=(i=(n=u.byEnd[c])._natives)&&i.type,i&&!h[r]&&!t[r])return void g.removeTrackEvent(t,n._id);!0===n._running&&(n._running=!1,(s=t.data.running[r]).splice(s.indexOf(n),1),t.data.disabled[r]||(i.end.call(t,e,n),t.emit(m,g.extend({},n,{plugin:r,type:m,track:n})))),c++}for(;u.byStart[l]&&u.byStart[l].start<=d;){if(r=(i=(a=u.byStart[l])._natives)&&i.type,i&&!h[r]&&!t[r])return void g.removeTrackEvent(t,a._id);a.end>d&&!1===a._running&&(a._running=!0,t.data.running[r].push(a),t.data.disabled[r]||(i.start.call(t,e,a),t.emit(v,g.extend({},a,{plugin:r,type:v,track:a})))),l++}}else if(d<o){for(;u.byStart[l]&&u.byStart[l].start>d;){if(r=(i=(a=u.byStart[l])._natives)&&i.type,i&&!h[r]&&!t[r])return void g.removeTrackEvent(t,a._id);!0===a._running&&(a._running=!1,(s=t.data.running[r]).splice(s.indexOf(a),1),t.data.disabled[r]||(i.end.call(t,e,a),t.emit(m,g.extend({},a,{plugin:r,type:m,track:a})))),l--}for(;u.byEnd[c]&&u.byEnd[c].end>d;){if(r=(i=(n=u.byEnd[c])._natives)&&i.type,i&&!h[r]&&!t[r])return void g.removeTrackEvent(t,n._id);n.start<=d&&!1===n._running&&(n._running=!0,t.data.running[r].push(n),t.data.disabled[r]||(i.start.call(t,e,n),t.emit(v,g.extend({},n,{plugin:r,type:v,track:n})))),c--}}u.endIndex=c,u.startIndex=l,u.previousUpdateTime=d,u.byStart.length<p&&u.startIndex--,u.byEnd.length<f&&u.endIndex--},g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrackEvent:function(t){return g.getTrackEvent.call(null,this,t)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(t){return g.removeTrackEvent.call(null,this,t),this},removePlugin:function(t){return g.removePlugin.call(null,this,t),this},timeUpdate:function(t){return g.timeUpdate.call(null,this,t),this},destroy:function(){return g.destroy.call(null,this),this}}),g.manifest={},g.registry=[],g.registryByName={},g.plugin=function(r,s,d){if(!(0<=g.protect.natives.indexOf(r.toLowerCase()))){function o(t,e){return t=t||g.nop,e=e||g.nop,function(){t.apply(this,arguments),e.apply(this,arguments)}}var u="function"==typeof s,c=["start","end","type","manifest"],l=["_setup","_teardown","start","end","frame"],t={};g.manifest[r]=d=d||s.manifest||{},l.forEach(function(t){var e,n;s[t]=(e=s[t]||g.nop,n=r,function(){if(g.plugin.debug)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(t){g.plugin.errors.push({plugin:n,thrown:t,source:e.toString()}),this.emit("pluginerror",g.plugin.errors)}})});function p(t,n){if(!n)return this;if(n.ranges&&g.isArray(n.ranges))return g.forEach(n.ranges,function(t){t=g.extend({},n,t);delete t.ranges,this[r](t)},this),this;var e,a,i=n._natives={};return g.extend(i,t),n._natives.type=n._natives.plugin=r,n._running=!1,i.start=i.start||i.in,i.end=i.end||i.out,n.once&&(i.end=o(i.end,function(){this.removeTrackEvent(n._id)})),i._teardown=o(function(){var t=f.call(arguments),e=this.data.running[i.type];t.unshift(null),t[1]._running&&e.splice(e.indexOf(n),1)&&i.end.apply(this,t),t[1]._running=!1,this.emit("trackend",g.extend({},n,{plugin:i.type,type:"trackend",track:g.getTrackEvent(this,n.id||n._id)}))},i._teardown),i._teardown=o(i._teardown,function(){this.emit("trackteardown",g.extend({},n,{plugin:r,type:"trackteardown",track:g.getTrackEvent(this,n.id||n._id)}))}),n.compose=n.compose||[],"string"==typeof n.compose&&(n.compose=n.compose.split(" ")),n.effect=n.effect||[],"string"==typeof n.effect&&(n.effect=n.effect.split(" ")),n.compose=n.compose.concat(n.effect),n.compose.forEach(function(t){e=g.compositions[t]||{},l.forEach(function(t){i[t]=o(i[t],e[t])})}),n._natives.manifest=d,"start"in n||(n.start=n.in||0),n.end||0===n.end||(n.end=n.out||Number.MAX_VALUE),h.call(n,"toString")||(n.toString=function(){var t=["start: "+n.start,"end: "+n.end,"id: "+(n.id||n._id)];return null!=n.target&&t.push("target: "+n.target),r+" ( "+t.join(", ")+" )"}),n.target||(a="options"in d&&d.options,n.target=a&&"target"in a&&a.target),!n._id&&n._natives&&(n._id=g.guid(n._natives.type)),n instanceof k?(n._natives&&(n._id=n.id||n._id||g.guid(n._natives.type),n._natives._setup&&(n._natives._setup.call(this,n),this.emit("tracksetup",g.extend({},n,{plugin:n._natives.type,type:"tracksetup",track:n})))),this.data.trackEvents.add(n),k.start(this,n),this.timeUpdate(this,null,!0),n._id&&g.addTrackEvent.ref(this,n)):g.addTrackEvent(this,n),g.forEach(t,function(t,e){-1===c.indexOf(e)&&this.on(e,t)},this),this}g.p[r]=t[r]=function(t,e){var n,a,i;if(t&&!e)e=t,t=null;else{if(n=this.getTrackEvent(t))return a=function(t,e){var n,a={};for(n in t)h.call(e,n)&&h.call(t,n)&&(a[n]=t[n]);return a}(n,i=e),n._natives._update?(this.data.trackEvents.remove(n),h.call(e,"start")&&(n.start=e.start),h.call(e,"end")&&(n.end=e.end),k.end(this,n),u&&s.call(this,n),n._natives._update.call(this,n,e),this.data.trackEvents.add(n),k.start(this,n),"cue"!==n._natives.type&&this.emit("trackchange",{id:n.id,type:"trackchange",previousValue:a,currentValue:i,track:n})):(g.extend(n,e),this.data.trackEvents.remove(t),n._natives._teardown&&n._natives._teardown.call(this,n),g.removeTrackEvent.ref(this,t),u?p.call(this,s.call(this,n),n):(n._id=n.id||n._id||g.guid(n._natives.type),n._natives&&n._natives._setup&&(n._natives._setup.call(this,n),this.emit("tracksetup",g.extend({},n,{plugin:n._natives.type,type:"tracksetup",track:n}))),this.data.trackEvents.add(n),k.start(this,n),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,n)),this.emit("trackchange",{id:n.id,type:"trackchange",previousValue:a,currentValue:n,track:n})),this;e.id=t}return this.data.running[r]=this.data.running[r]||[],n=this.options.defaults&&this.options.defaults[r]||{},n=g.extend({},n,e),p.call(this,u?s.call(this,n):s,n),this},d&&g.extend(s,{manifest:d});var e={fn:t[r],definition:s,base:s,parents:[],name:r};return g.registry.push(g.extend(t,e,{type:r})),g.registryByName[r]=e,t}g.error("'"+r+"' is a protected function name")},g.plugin.errors=[],g.plugin.debug="@VERSION"===g.version,g.removePlugin=function(t,e){if(!e){if(e=t,t=g.p,0<=g.protect.natives.indexOf(e.toLowerCase()))return void g.error("'"+e+"' is a protected function name");for(var n=g.registry.length,a=0;a<n;a++)if(g.registry[a].name===e)return g.registry.splice(a,1),delete g.registryByName[e],delete g.manifest[e],void delete t[e]}for(var i=t.data.trackEvents.byStart,r=t.data.trackEvents.byEnd,s=t.data.trackEvents.animating,d=0,o=i.length;d<o;d++)i[d]&&i[d]._natives&&i[d]._natives.type===e&&(i[d]._natives._teardown&&i[d]._natives._teardown.call(t,i[d]),i.splice(d,1),d--,o--,t.data.trackEvents.startIndex<=d&&(t.data.trackEvents.startIndex--,t.data.trackEvents.endIndex--)),r[d]&&r[d]._natives&&r[d]._natives.type===e&&r.splice(d,1);for(d=0,o=s.length;d<o;d++)s[d]&&s[d]._natives&&s[d]._natives.type===e&&(s.splice(d,1),d--,o--)},g.compositions={},g.compose=function(t,e,n){g.manifest[t]=n=n||e.manifest||{},g.compositions[t]=e},g.plugin.effect=g.effect=g.compose;var d=/^(?:\.|#|\[)/;g.dom={debug:!1,find:function(t,e){var n=null;if(e=e||c,t){if(!d.test(t)&&null!==(n=c.getElementById(t)))return n;try{n=e.querySelector(t)}catch(t){if(g.dom.debug)throw new Error(t)}}return n}};var m=/\?/,y={ajax:null,url:"",data:"",dataType:"",success:g.nop,type:"GET",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};g.xhr=function(t){var e;if(t.dataType=t.dataType&&t.dataType.toLowerCase()||null,!t.dataType||"jsonp"!==t.dataType&&"script"!==t.dataType)return(e=g.extend({},y,t)).ajax=new XMLHttpRequest,e.ajax?("GET"===e.type&&e.data&&(e.url+=(m.test(e.url)?"&":"?")+e.data,e.data=null),e.ajax.open(e.type,e.url,e.async),"POST"===e.type&&e.ajax.setRequestHeader("Content-Type",e.contentType),e.ajax.send(e.data||null),g.xhr.httpData(e)):void 0;g.xhr.getJSONP(t.url,t.success,"script"===t.dataType)},g.xhr.httpData=function(t){var e,n,a=null,i=null;return t.ajax.onreadystatechange=function(){if(4===t.ajax.readyState){try{a=JSON.parse(t.ajax.responseText)}catch(t){}if(!(e={xml:t.ajax.responseXML,text:t.ajax.responseText,json:a}).xml||!e.xml.documentElement){e.xml=null;try{n=new DOMParser,(i=n.parseFromString(t.ajax.responseText,"text/xml")).getElementsByTagName("parsererror").length||(e.xml=i)}catch(t){}}t.dataType&&(e=e[t.dataType]),t.success.call(t.ajax,e)}},e},g.xhr.getJSONP=function(t,e,n){var a,i,r,s=c.head||c.getElementsByTagName("head")[0]||c.documentElement,d=c.createElement("script"),o=!1,u=/(=)\?(?=&|$)|\?\?/;n||(null!==(r=t.match(/(callback=[^&]*)/))&&r.length?("?"===(r=r[1].split("=")[1])&&(r="jsonp"),i=g.guid(r),t=t.replace(/(callback=[^&]*)/,"callback="+i)):(i=g.guid("jsonp"),u.test(t)&&(t=t.replace(u,"$1"+i)),t=(a=t.split(/\?(.+)?/))[0]+"?",a[1]&&(t+=a[1]+"&"),t+="callback="+i),window[i]=function(t){e&&e(t),o=!0}),d.addEventListener("load",function(){n&&e&&e(),o&&delete window[i],s.removeChild(d)},!1),d.addEventListener("error",function(t){e&&e({error:t}),n||delete window[i],s.removeChild(d)},!1),d.src=t,s.insertBefore(d,s.firstChild)},g.getJSONP=g.xhr.getJSONP,g.getScript=g.xhr.getScript=function(t,e){return g.xhr.getJSONP(t,e,!0)},g.util={toSeconds:function(t,e){var n,a,i;return"number"==typeof t?t:("string"!=typeof t||/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/.test(t)||g.error("Invalid time format"),-1<(t=(n=t.split(":"))[a=n.length-1]).indexOf(";")&&(t=t.split(";"),i=0,e&&"number"==typeof e&&(i=parseFloat(t[1],10)/e),n[a]=parseInt(t[0],10)+i),i=n[0],{1:parseFloat(i,10),2:60*parseInt(i,10)+parseFloat(n[1],10),3:3600*parseInt(i,10)+60*parseInt(n[1],10)+parseFloat(n[2],10)}[n.length||1])}},g.p.cue=g.p.exec,g.protect={natives:(n=g.p,(Object.keys?Object.keys(n):function(t){var e,n=[];for(e in t)h.call(t,e)&&n.push(e);return n}(n)).map(function(t){return t.toLowerCase()}))},g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(t,e){var n=g.p[e];g.p[e]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+e+"', "+(null==t?"do not use.":"use '"+t+"' instead.")),g.p[e]=n),g.p[t].apply(this,[].slice.call(arguments))}}),o.Popcorn=g}else{o.Popcorn={isSupported:!1};for(var E="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);E.length;)o.Popcorn[E.shift()]=function(){}}function k(t){i.put.call(this,t)}function _(t){this.parent=t,this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.startIndex=0,this.endIndex=0,this.previousUpdateTime=-1,this.count=1}function x(t,e,n){return t[e]&&t[e]===n}}(window,window.document);