var popupOnOpen=function(){$(".closebutton").click(function(){$.fancybox.close()}),$("button[data-url]").click(function(){window.location=$(this).data("url")})};$(function(){window.citrusRealtyMark=function(t,e){if("add"==e){var o="CITRUS_REALTY_GO_2FAV";t.parents(".favorites_page").length&&(o="CITRUS_REALTY_FAV_REMOVE_TITLE"),t.addClass("added").find(".control-link-label").html(BX.message(o)).attr("title",BX.message(o))}else{var o="CITRUS_REALTY_GO_2FAV";t.parents(".favorites_page").length&&(o="CITRUS_REALTY_2FAV"),t.removeClass("added").find(".control-link-label").html(BX.message(o)).removeAttr("title")}},$(".add2favourites[data-id]").on("click",function(t){if(t.preventDefault(),$(this).hasClass("added")&&!$(this).parents(".favorites_page").length)return void(window.location.href=$("a.realty-favourites").attr("href"));var e=$(this),o=e.data("id"),a=e.hasClass("added")?"remove":"add";0>=o||$.getJSON("/ajax/favourites.php",{type:a,id:o},function(t){"object"==typeof t&&("undefined"!=typeof t.error?alert(t.error):("undefined"!=typeof updateFavoriteCount&&updateFavoriteCount(t.count),window.citrusRealtyMark(e,t.type),"undefined"!=typeof t.popup&&$.fancybox.open(t.popup,{autoSize:!1,fitToView:!1,scrolling:"no",closeBtn:!1,width:750,minHeight:666,margin:0,padding:0,afterShow:popupOnOpen})))})})}),BX.ready(function(){BX.bind(document.querySelector(".js-citrus-fav-print"),"click",function(){for(var t=[],e=0,o=window.citrusRealtyFav.length;o>e;e++)t.push("id[]="+window.citrusRealtyFav[e]);var a=BX.message("CITRUS_AREALTY_PDF_SEND_SITE_DIR")+"?"+t.join("&");location.href=a})});